<section class="space-y-6">
  <header class="space-y-1">
    <h2 class="text-2xl font-semibold text-strong">Kegiatan Jemaat</h2>
    <p class="text-sm text-strong/70">Kelola daftar kegiatan, kalender, dan CTA kontak.</p>
  </header>

  <app-loading-state *ngIf="isLoading"></app-loading-state>

  <app-error-state
    *ngIf="!isLoading && errorMessage"
    [message]="errorMessage"
    (retry)="loadActivities()"
  ></app-error-state>

  <ng-container *ngIf="!isLoading && !errorMessage">
    <app-empty-state
      *ngIf="!hasData"
      title="Data kegiatan belum tersedia"
      description="Lengkapi form berikut lalu simpan untuk menampilkan data di halaman public."
    ></app-empty-state>

    <app-status-banner [variant]="statusVariant" [message]="statusMessage"></app-status-banner>

    <div class="space-y-6">
      <section class="rounded-2xl border border-default bg-surface p-6 shadow-sm">
        <h3 class="text-lg font-semibold text-strong">Header Kegiatan</h3>
        <div class="mt-4 grid gap-4 lg:grid-cols-2">
          <label class="block text-sm text-strong/70">
            Label
            <input
              type="text"
              [(ngModel)]="activities.hero.label"
              name="activitiesHeroLabel"
              class="mt-2 w-full rounded-xl border border-default bg-app px-3 py-2 text-sm"
              required
            />
          </label>
          <label class="block text-sm text-strong/70">
            Judul
            <input
              type="text"
              [(ngModel)]="activities.hero.title"
              name="activitiesHeroTitle"
              class="mt-2 w-full rounded-xl border border-default bg-app px-3 py-2 text-sm"
              required
            />
          </label>
          <label class="block text-sm text-strong/70 lg:col-span-2">
            Deskripsi
            <textarea
              rows="3"
              [(ngModel)]="activities.hero.description"
              name="activitiesHeroDescription"
              class="mt-2 w-full rounded-xl border border-default bg-app px-3 py-2 text-sm"
              required
            ></textarea>
          </label>
        </div>
      </section>

      <section class="rounded-2xl border border-default bg-surface p-6 shadow-sm">
        <h3 class="text-lg font-semibold text-strong">Kegiatan Terdekat</h3>

        <div class="mt-4 rounded-2xl border border-default bg-app p-4">
          <div class="text-sm font-semibold text-strong">Tambah Kegiatan</div>
          <div class="mt-3 grid gap-3 md:grid-cols-3">
            <label class="block text-xs text-strong/60">
              Judul
              <input
                type="text"
                [(ngModel)]="newUpcoming.title"
                name="newUpcomingTitle"
                class="mt-2 w-full rounded-xl border border-default bg-surface px-3 py-2 text-sm"
                required
              />
            </label>
            <label class="block text-xs text-strong/60">
              Kategori
              <input
                type="text"
                [(ngModel)]="newUpcoming.category"
                name="newUpcomingCategory"
                class="mt-2 w-full rounded-xl border border-default bg-surface px-3 py-2 text-sm"
                required
              />
            </label>
            <label class="block text-xs text-strong/60">
              Tanggal
              <input
                type="text"
                [(ngModel)]="newUpcoming.dateLabel"
                name="newUpcomingDate"
                class="mt-2 w-full rounded-xl border border-default bg-surface px-3 py-2 text-sm"
                required
              />
            </label>
            <label class="block text-xs text-strong/60">
              Waktu
              <input
                type="text"
                [(ngModel)]="newUpcoming.timeLabel"
                name="newUpcomingTime"
                class="mt-2 w-full rounded-xl border border-default bg-surface px-3 py-2 text-sm"
              />
            </label>
            <label class="block text-xs text-strong/60">
              Lokasi
              <input
                type="text"
                [(ngModel)]="newUpcoming.location"
                name="newUpcomingLocation"
                class="mt-2 w-full rounded-xl border border-default bg-surface px-3 py-2 text-sm"
              />
            </label>
            <label class="block text-xs text-strong/60">
              Status
              <input
                type="text"
                [(ngModel)]="newUpcoming.status"
                name="newUpcomingStatus"
                class="mt-2 w-full rounded-xl border border-default bg-surface px-3 py-2 text-sm"
              />
            </label>
          </div>
          <label class="mt-3 block text-xs text-strong/60">
            Ringkasan
            <textarea
              rows="2"
              [(ngModel)]="newUpcoming.summary"
              name="newUpcomingSummary"
              class="mt-2 w-full rounded-xl border border-default bg-surface px-3 py-2 text-sm"
            ></textarea>
          </label>
          <div class="mt-3 grid gap-3 md:grid-cols-2">
            <div class="rounded-xl border border-default bg-surface p-3">
              <div class="text-xs font-semibold text-strong">CTA Utama</div>
              <div class="mt-2 grid gap-2">
                <input
                  type="text"
                  [(ngModel)]="newUpcoming.ctaPrimary!.label"
                  name="newUpcomingCtaPrimaryLabel"
                  placeholder="Label"
                  class="w-full rounded-xl border border-default bg-app px-3 py-2 text-sm"
                />
                <input
                  type="text"
                  [(ngModel)]="newUpcoming.ctaPrimary!.url"
                  name="newUpcomingCtaPrimaryUrl"
                  placeholder="URL"
                  class="w-full rounded-xl border border-default bg-app px-3 py-2 text-sm"
                />
              </div>
            </div>
            <div class="rounded-xl border border-default bg-surface p-3">
              <div class="text-xs font-semibold text-strong">CTA Sekunder</div>
              <div class="mt-2 grid gap-2">
                <input
                  type="text"
                  [(ngModel)]="newUpcoming.ctaSecondary!.label"
                  name="newUpcomingCtaSecondaryLabel"
                  placeholder="Label"
                  class="w-full rounded-xl border border-default bg-app px-3 py-2 text-sm"
                />
                <input
                  type="text"
                  [(ngModel)]="newUpcoming.ctaSecondary!.url"
                  name="newUpcomingCtaSecondaryUrl"
                  placeholder="URL"
                  class="w-full rounded-xl border border-default bg-app px-3 py-2 text-sm"
                />
              </div>
            </div>
          </div>
          <button
            type="button"
            class="mt-4 rounded-xl border border-default px-4 py-2 text-sm font-semibold text-strong hover:bg-surface"
            [disabled]="isSavingUpcoming"
            (click)="addUpcoming()"
          >
            Tambah Kegiatan
          </button>
        </div>

        <div class="mt-4 grid gap-4">
          <div
            *ngFor="let item of activities.upcoming; let i = index; trackBy: trackUpcoming"
            class="rounded-2xl border border-default bg-app p-4"
          >
            <div class="flex items-center justify-between gap-3">
              <div class="text-sm font-semibold text-strong">Kegiatan {{ i + 1 }}</div>
              <div class="flex items-center gap-3">
                <button
                  type="button"
                  class="text-xs font-semibold text-primary hover:underline"
                  [disabled]="isSavingUpcoming"
                  (click)="updateUpcoming(item)"
                >
                  Simpan
                </button>
                <button
                  type="button"
                  class="text-xs font-semibold text-red-600 hover:underline"
                  [disabled]="isSavingUpcoming"
                  (click)="deleteUpcoming(item)"
                >
                  Hapus
                </button>
              </div>
            </div>
            <div class="mt-3 grid gap-3 md:grid-cols-3">
              <label class="block text-xs text-strong/60">
                Judul
                <input
                  type="text"
                  [(ngModel)]="item.title"
                  name="upcomingTitle-{{ i }}"
                  class="mt-2 w-full rounded-xl border border-default bg-surface px-3 py-2 text-sm"
                  required
                />
              </label>
              <label class="block text-xs text-strong/60">
                Kategori
                <input
                  type="text"
                  [(ngModel)]="item.category"
                  name="upcomingCategory-{{ i }}"
                  class="mt-2 w-full rounded-xl border border-default bg-surface px-3 py-2 text-sm"
                  required
                />
              </label>
              <label class="block text-xs text-strong/60">
                Tanggal
                <input
                  type="text"
                  [(ngModel)]="item.dateLabel"
                  name="upcomingDate-{{ i }}"
                  class="mt-2 w-full rounded-xl border border-default bg-surface px-3 py-2 text-sm"
                  required
                />
              </label>
              <label class="block text-xs text-strong/60">
                Waktu
                <input
                  type="text"
                  [(ngModel)]="item.timeLabel"
                  name="upcomingTime-{{ i }}"
                  class="mt-2 w-full rounded-xl border border-default bg-surface px-3 py-2 text-sm"
                />
              </label>
              <label class="block text-xs text-strong/60">
                Lokasi
                <input
                  type="text"
                  [(ngModel)]="item.location"
                  name="upcomingLocation-{{ i }}"
                  class="mt-2 w-full rounded-xl border border-default bg-surface px-3 py-2 text-sm"
                />
              </label>
              <label class="block text-xs text-strong/60">
                Status
                <input
                  type="text"
                  [(ngModel)]="item.status"
                  name="upcomingStatus-{{ i }}"
                  class="mt-2 w-full rounded-xl border border-default bg-surface px-3 py-2 text-sm"
                />
              </label>
            </div>
            <label class="mt-3 block text-xs text-strong/60">
              Ringkasan
              <textarea
                rows="2"
                [(ngModel)]="item.summary"
                name="upcomingSummary-{{ i }}"
                class="mt-2 w-full rounded-xl border border-default bg-surface px-3 py-2 text-sm"
              ></textarea>
            </label>
            <div class="mt-3 grid gap-3 md:grid-cols-2">
              <div class="rounded-xl border border-default bg-surface p-3">
                <div class="text-xs font-semibold text-strong">CTA Utama</div>
                <div class="mt-2 grid gap-2">
                  <input
                    type="text"
                    [(ngModel)]="item.ctaPrimary!.label"
                    name="upcomingCtaPrimaryLabel-{{ i }}"
                    placeholder="Label"
                    class="w-full rounded-xl border border-default bg-app px-3 py-2 text-sm"
                  />
                  <input
                    type="text"
                    [(ngModel)]="item.ctaPrimary!.url"
                    name="upcomingCtaPrimaryUrl-{{ i }}"
                    placeholder="URL"
                    class="w-full rounded-xl border border-default bg-app px-3 py-2 text-sm"
                  />
                </div>
              </div>
              <div class="rounded-xl border border-default bg-surface p-3">
                <div class="text-xs font-semibold text-strong">CTA Sekunder</div>
                <div class="mt-2 grid gap-2">
                  <input
                    type="text"
                    [(ngModel)]="item.ctaSecondary!.label"
                    name="upcomingCtaSecondaryLabel-{{ i }}"
                    placeholder="Label"
                    class="w-full rounded-xl border border-default bg-app px-3 py-2 text-sm"
                  />
                  <input
                    type="text"
                    [(ngModel)]="item.ctaSecondary!.url"
                    name="upcomingCtaSecondaryUrl-{{ i }}"
                    placeholder="URL"
                    class="w-full rounded-xl border border-default bg-app px-3 py-2 text-sm"
                  />
                </div>
              </div>
            </div>
            <p class="mt-2 text-xs text-strong/50">ID: {{ item.id }}</p>
          </div>
        </div>
      </section>

      <section class="rounded-2xl border border-default bg-surface p-6 shadow-sm">
        <div class="flex flex-wrap items-center justify-between gap-3">
          <div>
            <h3 class="text-lg font-semibold text-strong">Kalender Bulanan</h3>
            <p class="text-sm text-strong/60">Isi daftar agenda bulan berjalan.</p>
          </div>
          <button
            type="button"
            class="rounded-xl border border-default px-4 py-2 text-sm font-semibold text-strong hover:bg-app"
            (click)="addCalendar()"
          >
            Tambah Agenda
          </button>
        </div>

        <div class="mt-4 grid gap-4">
          <div
            *ngFor="let item of activities.calendar; let i = index; trackBy: trackCalendar"
            class="rounded-2xl border border-default bg-app p-4"
          >
            <div class="flex items-center justify-between gap-3">
              <div class="text-sm font-semibold text-strong">Agenda {{ i + 1 }}</div>
              <button
                type="button"
                class="text-xs font-semibold text-red-600 hover:underline"
                (click)="removeCalendar(i)"
              >
                Hapus
              </button>
            </div>
            <div class="mt-3 grid gap-3 md:grid-cols-3">
              <label class="block text-xs text-strong/60">
                Tanggal
                <input
                  type="text"
                  [(ngModel)]="item.dateLabel"
                  name="calendarDate-{{ i }}"
                  class="mt-2 w-full rounded-xl border border-default bg-surface px-3 py-2 text-sm"
                  required
                />
              </label>
              <label class="block text-xs text-strong/60">
                Judul
                <input
                  type="text"
                  [(ngModel)]="item.title"
                  name="calendarTitle-{{ i }}"
                  class="mt-2 w-full rounded-xl border border-default bg-surface px-3 py-2 text-sm"
                  required
                />
              </label>
              <label class="block text-xs text-strong/60">
                Waktu
                <input
                  type="text"
                  [(ngModel)]="item.timeLabel"
                  name="calendarTime-{{ i }}"
                  class="mt-2 w-full rounded-xl border border-default bg-surface px-3 py-2 text-sm"
                  required
                />
              </label>
            </div>
          </div>
        </div>
      </section>

      <section class="rounded-2xl border border-default bg-surface p-6 shadow-sm">
        <div class="flex flex-wrap items-center justify-between gap-3">
          <div>
            <h3 class="text-lg font-semibold text-strong">Arsip Kegiatan</h3>
            <p class="text-sm text-strong/60">Daftar bulan arsip kegiatan.</p>
          </div>
          <button
            type="button"
            class="rounded-xl border border-default px-4 py-2 text-sm font-semibold text-strong hover:bg-app"
            (click)="addArchive()"
          >
            Tambah Bulan
          </button>
        </div>

        <div class="mt-4 grid gap-4">
          <div
            *ngFor="let item of activities.archives; let i = index; trackBy: trackArchive"
            class="rounded-2xl border border-default bg-app p-4"
          >
            <div class="flex items-center justify-between gap-3">
              <div class="text-sm font-semibold text-strong">Bulan {{ i + 1 }}</div>
              <button
                type="button"
                class="text-xs font-semibold text-red-600 hover:underline"
                (click)="removeArchive(i)"
              >
                Hapus
              </button>
            </div>
            <label class="mt-3 block text-xs text-strong/60">
              Bulan
              <input
                type="text"
                [(ngModel)]="item.month"
                name="archiveMonth-{{ i }}"
                class="mt-2 w-full rounded-xl border border-default bg-surface px-3 py-2 text-sm"
                required
              />
            </label>
          </div>
        </div>
      </section>

      <section class="rounded-2xl border border-default bg-surface p-6 shadow-sm">
        <h3 class="text-lg font-semibold text-strong">CTA Kontak</h3>
        <div class="mt-4 grid gap-4 lg:grid-cols-2">
          <label class="block text-sm text-strong/70">
            Judul
            <input
              type="text"
              [(ngModel)]="activities.contactCta.title"
              name="contactCtaTitle"
              class="mt-2 w-full rounded-xl border border-default bg-app px-3 py-2 text-sm"
              required
            />
          </label>
          <label class="block text-sm text-strong/70">
            Label Tombol
            <input
              type="text"
              [(ngModel)]="activities.contactCta.label"
              name="contactCtaLabel"
              class="mt-2 w-full rounded-xl border border-default bg-app px-3 py-2 text-sm"
              required
            />
          </label>
          <label class="block text-sm text-strong/70 lg:col-span-2">
            Deskripsi
            <textarea
              rows="2"
              [(ngModel)]="activities.contactCta.description"
              name="contactCtaDescription"
              class="mt-2 w-full rounded-xl border border-default bg-app px-3 py-2 text-sm"
              required
            ></textarea>
          </label>
          <label class="block text-sm text-strong/70 lg:col-span-2">
            URL
            <input
              type="text"
              [(ngModel)]="activities.contactCta.url"
              name="contactCtaUrl"
              class="mt-2 w-full rounded-xl border border-default bg-app px-3 py-2 text-sm"
              required
            />
          </label>
        </div>
      </section>

      <app-admin-form-actions
        [isSubmitting]="isSaving"
        (save)="onSaveContent()"
        (cancel)="onCancel()"
      ></app-admin-form-actions>
    </div>
  </ng-container>
</section>
