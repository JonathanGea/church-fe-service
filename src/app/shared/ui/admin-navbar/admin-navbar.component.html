<nav
  aria-label="Admin"
  class="w-full border-b border-default/60 transition-all duration-200"
  [ngClass]="
    isScrolled
      ? 'bg-surface shadow-sm'
      : 'bg-surface/70 backdrop-blur-md shadow-none'
  "
>
  <div class="flex h-16 w-full items-center gap-4 px-4 sm:px-6 lg:px-8">
    <div class="flex items-center gap-3">
      <button
        type="button"
        aria-label="Open menu"
        class="inline-flex h-10 w-10 items-center justify-center rounded-xl border border-default text-strong transition hover:text-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/30"
        (click)="onToggleMenu()"
      >
        <i class="fa-solid fa-bars text-base" aria-hidden="true"></i>
      </button>

      <div class="min-w-0">
        <div class="truncate text-xs text-strong/60">
          <span *ngFor="let crumb of breadcrumbs; let last = last">
            {{ crumb }}<span *ngIf="!last"> / </span>
          </span>
        </div>
        <div class="truncate text-base font-semibold text-strong sm:text-lg">{{ pageTitle }}</div>
      </div>
    </div>

    <div class="flex-1"></div>

    <div class="flex items-center gap-3">
      <div class="relative hidden w-64 sm:block md:w-72 lg:w-80">
        <span class="pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 text-strong/50">
          <i class="fa-solid fa-magnifying-glass text-xs" aria-hidden="true"></i>
        </span>
        <input
          #desktopSearchInput
          type="search"
          aria-label="Search"
          placeholder="Search here"
          class="w-full rounded-xl border border-default bg-app py-2 pl-10 pr-4 text-sm text-strong placeholder:text-strong/50 focus:outline-none focus:ring-2 focus:ring-primary/30"
          (input)="onSearchInput(desktopSearchInput.value)"
          (keydown.enter)="onSearchEnter(desktopSearchInput.value)"
        />
      </div>

      <div class="relative">
        <button
          type="button"
          aria-label="User menu"
          [attr.aria-expanded]="isUserMenuOpen"
          aria-controls="adminUserMenu"
          class="inline-flex h-10 w-10 items-center justify-center rounded-xl border border-default text-strong transition hover:text-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/30"
          (click)="toggleUserMenu()"
        >
          <i class="fa-solid fa-user text-base" aria-hidden="true"></i>
        </button>

        <div
          id="adminUserMenu"
          class="absolute right-0 z-20 mt-2 w-56 rounded-xl border border-default bg-surface p-2 shadow-lg"
          *ngIf="isUserMenuOpen"
        >
          <div class="px-3 py-2 text-[11px] font-semibold uppercase tracking-wide text-strong/50">
            Public Pages
          </div>
          <a
            routerLink="/"
            class="flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm text-strong transition hover:bg-app"
            (click)="closeUserMenu()"
          >
            <i class="fa-solid fa-house text-xs" aria-hidden="true"></i>
            Beranda
          </a>
          <a
            routerLink="/warta"
            class="flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm text-strong transition hover:bg-app"
            (click)="closeUserMenu()"
          >
            <i class="fa-solid fa-file-lines text-xs" aria-hidden="true"></i>
            Warta
          </a>
          <a
            routerLink="/ibadah"
            class="flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm text-strong transition hover:bg-app"
            (click)="closeUserMenu()"
          >
            <i class="fa-solid fa-church text-xs" aria-hidden="true"></i>
            Ibadah
          </a>
          <a
            routerLink="/kegiatan"
            class="flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm text-strong transition hover:bg-app"
            (click)="closeUserMenu()"
          >
            <i class="fa-solid fa-calendar-days text-xs" aria-hidden="true"></i>
            Kegiatan
          </a>
          <a
            routerLink="/pelayanan"
            class="flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm text-strong transition hover:bg-app"
            (click)="closeUserMenu()"
          >
            <i class="fa-solid fa-hands-praying text-xs" aria-hidden="true"></i>
            Pelayanan
          </a>
          <a
            routerLink="/kontak"
            class="flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm text-strong transition hover:bg-app"
            (click)="closeUserMenu()"
          >
            <i class="fa-solid fa-phone text-xs" aria-hidden="true"></i>
            Kontak
          </a>
          <a
            routerLink="/persembahan"
            class="flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm text-strong transition hover:bg-app"
            (click)="closeUserMenu()"
          >
            <i class="fa-solid fa-hand-holding-heart text-xs" aria-hidden="true"></i>
            Persembahan
          </a>
          <a
            routerLink="/album"
            class="flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm text-strong transition hover:bg-app"
            (click)="closeUserMenu()"
          >
            <i class="fa-solid fa-images text-xs" aria-hidden="true"></i>
            Album
          </a>

          <div class="my-2 border-t border-default"></div>
          <button
            type="button"
            class="flex w-full items-center justify-between gap-3 rounded-lg px-3 py-2 text-sm text-strong transition hover:bg-app"
          >
            <span class="inline-flex items-center gap-2">
              <i class="fa-solid fa-bell text-xs" aria-hidden="true"></i>
              Notifikasi
            </span>
            <span class="rounded-full bg-primary px-2 py-0.5 text-[10px] font-semibold text-white">
              {{ notificationsCount }}
            </span>
          </button>

          <button
            type="button"
            class="flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm text-strong transition hover:bg-app"
          >
            <i class="fa-solid fa-gear text-xs" aria-hidden="true"></i>
            Pengaturan
          </button>

          <button
            type="button"
            class="flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm text-strong transition hover:bg-app"
            (click)="onSignOut()"
          >
            <i class="fa-solid fa-right-from-bracket text-xs" aria-hidden="true"></i>
            Keluar
          </button>
        </div>
      </div>
    </div>
  </div>
</nav>
